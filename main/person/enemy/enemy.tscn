[gd_scene load_steps=5 format=3 uid="uid://bfy3kf1ukc45o"]

[ext_resource type="PackedScene" uid="uid://dkidqk23c0r27" path="res://main/person/person.tscn" id="1_vgcad"]
[ext_resource type="PackedScene" uid="uid://cg63thh1h5ifl" path="res://main/projectile/bullet/bullet_medium.tscn" id="2_mp8gt"]
[ext_resource type="Script" path="res://main/person/enemy/follow_state.gd" id="2_omewd"]

[sub_resource type="SphereShape3D" id="SphereShape3D_pffuv"]
radius = 10.0

[node name="Enemy" node_paths=PackedStringArray("projectile_spawn") instance=ExtResource("1_vgcad")]
speed = 3.0
acceleration = 25.0
projectile_spawn = NodePath("Camera3D/EnemyAmmoSpawn")
projectile = ExtResource("2_mp8gt")
cooldown_extra_max = 0.3

[node name="legs" parent="Manikin/Bottom/Skeleton3D" index="0"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="torsoball" parent="Manikin/Bottom/Skeleton3D" index="1"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="waist" parent="Manikin/Bottom/Skeleton3D" index="2"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="WaistPhysical" parent="Manikin/Bottom/Skeleton3D" index="3"]
transform = Transform3D(-2.05767e-09, -0.971431, -0.23732, 5.67988e-08, -0.231435, 0.947894, -0.976463, -1.34439e-08, 5.5096e-08, 0.0231658, 0.786889, 0.000258338)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000264565, 0.0088569, 0.0613599)
body_offset = Transform3D(-2.05767e-09, -0.971431, -0.23732, 1.40291e-09, 0.231435, -0.947894, 0.976463, -3.50724e-10, 1.4029e-09, 0.0231658, 0.0561129, -0.000258338)

[node name="Physical Bone thigh_L" parent="Manikin/Bottom/Skeleton3D" index="4"]
transform = Transform3D(1, -3.68776e-08, -8.58239e-09, 2.41206e-09, -0.158467, 0.994886, -4.0223e-08, -0.993688, -0.158672, 0.0463031, 0.559597, 0.0239646)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.85769e-05, 0.00884428, 0.0956447)
body_offset = Transform3D(1, 7.37967e-09, -2.75474e-09, -2.40701e-09, -0.11011, -1.00141, -4.93446e-09, 1.0002, -0.110229, -2.85767e-05, 0.0967534, 0.00169675)

[node name="Physical Bone thigh_R" parent="Manikin/Bottom/Skeleton3D" index="5"]
transform = Transform3D(1, -4.65449e-08, 4.85323e-09, -2.68946e-08, -0.482265, 0.885703, -3.98615e-08, -0.88601, -0.482013, -0.0522645, 0.573765, 0.0631344)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000478668, 0.0172598, 0.0992547)
body_offset = Transform3D(1, -6.6692e-09, 2.5152e-08, 2.59508e-08, 0.230639, -0.981676, 2.47147e-09, 0.982038, 0.230478, -0.00047867, 0.0934551, -0.0398258)

[node name="Physical Bone foot_control_L" parent="Manikin/Bottom/Skeleton3D" index="6"]
transform = Transform3D(1, -5.6697e-10, -8.70788e-11, -3.70673e-12, 0.257272, -0.969165, 4.15454e-11, 0.969312, 0.257234, 0.0464874, 0.0284792, 0.0470822)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000155766, 0.0347753, 0.0952645)
body_offset = Transform3D(-1, 5.6697e-10, 8.70788e-11, 4.15454e-11, 0.969312, 0.257234, -3.70673e-12, 0.257272, -0.969165, -0.000155766, -0.0582134, 0.0833803)

[node name="Physical Bone foot_IK_L" parent="Manikin/Bottom/Skeleton3D" index="7"]
transform = Transform3D(-1, 4.83652e-10, 1.29706e-10, 3.70673e-12, 0.235411, -0.97463, -4.15454e-11, -0.974721, -0.235416, 0.0463661, 0.247816, 0.00257284)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.44515e-05, -0.0674332, 0.216534)
body_offset = Transform3D(-1, 4.83652e-10, 1.29706e-10, 4.15454e-11, 0.974721, 0.235416, 3.70673e-12, 0.235411, -0.97463, 3.44515e-05, 0.014753, 0.226915)

[node name="Physical Bone foot_control_R" parent="Manikin/Bottom/Skeleton3D" index="8"]
transform = Transform3D(1, -4.69505e-10, -9.52021e-11, -1.07736e-11, 0.453812, -0.894422, 6.79137e-11, 0.89525, 0.453512, -0.0512282, -0.00138821, 0.296838)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000557628, -0.194317, -0.0387631)
body_offset = Transform3D(-1, 4.69505e-10, 9.52021e-11, 6.79137e-11, 0.89525, 0.453512, -1.07736e-11, 0.453812, -0.894422, -0.000557628, 0.191542, 0.0535129)

[node name="Physical Bone foot_IK_R" parent="Manikin/Bottom/Skeleton3D" index="9"]
transform = Transform3D(-1, 3.47377e-10, 6.69385e-11, 1.07736e-11, 0.027144, -1.0018, -6.79137e-11, -1.00144, -0.0271593, -0.0520852, 0.204116, 0.207179)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000299446, 0.184485, 0.187884)
body_offset = Transform3D(-1, 3.47377e-10, 6.69385e-11, 6.79137e-11, 1.00144, 0.0271593, 1.07736e-11, 0.027144, -1.0018, -0.000299446, -0.189853, 0.183215)

[node name="arms" parent="Manikin/Top/Skeleton3D" index="0"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="head" parent="Manikin/Top/Skeleton3D" index="1"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="neckball" parent="Manikin/Top/Skeleton3D" index="2"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="torso" parent="Manikin/Top/Skeleton3D" index="3"]
instance_shader_parameters/color = Color(0.843137, 0.392157, 0.137255, 1)

[node name="TorsoPhysical" parent="Manikin/Top/Skeleton3D" index="4"]
transform = Transform3D(1, 0, 0, 0, 0, -1, 0, 1, 0, 0, 0.909007, 0.0116637)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.134761)
body_offset = Transform3D(1, 0, 0, 0, 0, -1, 0, 1, 0, 0, 0.134761, 0)

[node name="Physical Bone shoulder_L" parent="Manikin/Top/Skeleton3D" index="5"]
transform = Transform3D(-0.982496, 0.128503, -0.134794, 0.135682, 0.989705, -0.0454618, 0.127566, -0.0629555, -0.989827, 0.152994, 0.993822, 0.100993)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.9558e-07, 5.26484e-06, 0.105309)
body_offset = Transform3D(0.999991, -4.56348e-07, -4.32134e-07, 8.04663e-07, 6.70552e-08, -0.999997, 1.31503e-06, 0.999996, -1.86265e-07, -6.50063e-07, 0.105309, -5.24521e-06)

[node name="Physical Bone arm_L" parent="Manikin/Top/Skeleton3D" index="6"]
transform = Transform3D(-0.51931, 0.179525, 0.835518, 0.175514, 0.979431, -0.101311, -0.836369, 0.0940573, -0.540043, 0.08208, 1.00893, 0.260239)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.28211e-06, 2.74018e-06, 0.101862)
body_offset = Transform3D(1, 8.31485e-06, 3.8743e-07, -5.96046e-07, 2.57231e-05, -1, 5.21541e-08, 1.00018, 1.11759e-08, 2.24262e-06, 0.101862, -2.74181e-06)

[node name="Physical Bone shoulder_R" parent="Manikin/Top/Skeleton3D" index="7"]
transform = Transform3D(-0.00585698, 0.986393, -0.164296, 0.998772, -0.00231334, -0.0494938, -0.0492005, -0.164385, -0.985168, -0.104545, 1.0016, 0.127202)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.35687e-05, 8.9407e-07, 0.105309)
body_offset = Transform3D(1, 4.65661e-09, 2.01166e-07, 1.71363e-07, -6.70552e-07, -1, -1.76951e-08, 1, 0, -1.35899e-05, 0.105309, -8.9407e-07)

[node name="Physical Bone arm_R" parent="Manikin/Top/Skeleton3D" index="8"]
transform = Transform3D(-0.00585701, 0.986393, -0.164296, 0.998772, -0.00231329, -0.0494938, -0.0492007, -0.164385, -0.985168, -0.0705078, 1.01187, 0.33129)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.451e-06, -3.72529e-08, 0.101852)
body_offset = Transform3D(1, 9.03383e-08, 2.01166e-07, -6.33299e-08, -8.04663e-07, -1, -3.07336e-08, 1, 0, 1.43051e-06, 0.101852, 3.72529e-08)

[node name="Camera3D" parent="." index="4"]
current = true

[node name="StateMachine" parent="." index="5" node_paths=PackedStringArray("state")]
state = NodePath("Follow")

[node name="Follow" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("detection_area")]
script = ExtResource("2_omewd")
detection_area = NodePath("../../DetectionArea3D")
equilibrium_distance = 5.0

[node name="Timer" type="Timer" parent="StateMachine/Follow" index="0"]
one_shot = true

[node name="DetectionArea3D" type="Area3D" parent="." index="7"]
collision_layer = 0
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="DetectionArea3D" index="0"]
shape = SubResource("SphereShape3D_pffuv")

[node name="VisibleOnScreenEnabler3D" type="VisibleOnScreenEnabler3D" parent="." index="18"]
aabb = AABB(-24, -16, -24, 48, 32, 48)

[editable path="Manikin"]
[editable path="Manikin/Top/Skeleton3D/torso/Blood"]
